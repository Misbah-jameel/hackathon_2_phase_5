# Cloud deployment overrides
# Usage: helm upgrade --install todo-backend ./helm/backend -f helm/backend/values-cloud.yaml -n todo-app

replicaCount: 1

image:
  repository: ghcr.io/misbah-jameel/todo-backend
  tag: latest
  pullPolicy: IfNotPresent

service:
  type: ClusterIP
  port: 8000
  targetPort: 8000

dapr:
  enabled: true
  appId: todo-backend
  appPort: 8000

env:
  JWT_ALGORITHM: "HS256"
  JWT_EXPIRY_HOURS: "24"
  CORS_ORIGINS: "*"
  ANTHROPIC_MODEL: "claude-3-haiku-20240307"
  DAPR_HOST: "localhost"
  DAPR_PORT: "3500"
  DAPR_PUBSUB_NAME: "pubsub"

probes:
  liveness:
    path: /health
    port: 8000
    initialDelaySeconds: 45
    periodSeconds: 30
    timeoutSeconds: 10
    failureThreshold: 5
  readiness:
    path: /health
    port: 8000
    initialDelaySeconds: 30
    periodSeconds: 15
    timeoutSeconds: 10
    failureThreshold: 5

resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 1000m
    memory: 1Gi
